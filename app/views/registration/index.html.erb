<div class="container -pt-px px-0 max-w-sm">
  <%= render partial: "shared/hamburger_menu" %>
  <%= render partial: "shared/header" %>
  <%= render_card(title: "Sounds Good", subtitle: "Register below", body: nil, footer: nil, class: "w-full my-4") do %>
    <%= render_form_with(url: '/registration', method: :post, model: @user, class: "w-full") do |form| %>
      <%= form.fields_for :contact_methods do |builder| %>
        <div class="grid grid-cols-3 items-baseline pr-8">
          <%= builder.label :contact_detail, class: "text-right mr-4 text-md", label: 'Email' %>
          <%= builder.email_field :contact_detail, required: true, class: "mb-4 col-span-2", label: 'Zipcode' %>
          <div></div>
        </div>
      <% end %>
      <div class="grid grid-cols-3 items-baseline mb-4 pr-8">
        <%= form.label :postal, class: "text-right mr-4 text-md" %>
        <%= form.text_field :postal, required: true, class: "mb-4 col-span-2", value: session.dig(:geocode_data, 'postal'), autocomplete: "off" %>
      </div>
      <div class="flex justify-center mb-6">
        <%= form.submit "Register" %>
      </div>
    <% end %>
    <% if flash[:notice] %>
      <%= render_toast header: flash['notice']['successful'] ? 'Success!' : 'Whoops!', description: flash['notice']['message'], id: "default_toast", class: "hidden" %>
    <% end %>
  <% end %>
  <%= render_card(title: "View Deals", subtitle: "Manually check here", body: nil, footer: nil, class: "w-full my-4") do %>
    <%= render_form_with(url: "/registration_redirect", method: :post, model: User.new, class: "w-full") do |form| %>
        <div class="grid grid-cols-3 items-baseline mb-4 pr-8">
          <%= form.label :postal, class: "text-right mr-4 text-md" %>
          <%= form.text_field :postal, required: true, class: "mb-4 col-span-2", value: session.dig(:geocode_data, 'postal'), autocomplete: "off" %>
        </div>
        <div class="flex justify-center mb-6">
          <%= form.submit "Check" %>
        </div>
    <% end %>
    <% if flash[:notice] %>
      <% if flash['notice']['successful'] %>
        <%= render_toast header: 'Success!', description: flash['notice']['message'], id: "default_toast", class: "hidden" %>
      <% else %>
        <%= render_toast header: 'Whoops!', description: flash['notice']['message'], variant: :destructive, id: "error_toast", class: "hidden" %>
      <% end %>
    <% end %>
  <% end %>
  <%= render partial: "shared/footer" %>
</div>
