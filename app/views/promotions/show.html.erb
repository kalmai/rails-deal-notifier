<div class="container -pt-px px-0 max-w-sm">
  <%= render partial: "shared/hamburger_menu" %>
  <%= render_card(title: "View Deals", subtitle: "Manually check here", body: nil, footer: nil, class: "w-full my-4") do %>
    <%= render_form_with(url: "/registration_redirect", method: :post, model: User.new, class: "w-full") do |form| %>
        <div class="grid grid-cols-3 items-baseline mb-4 pr-8">
          <%= form.label :postal, class: "text-right mr-4 text-md" %>
          <%= form.text_field :postal, required: true, class: "mb-4 col-span-2", value: session.dig(:geocode_data, 'postal'), autocomplete: "off" %>
        </div>
        <div class="flex justify-center mb-6">
          <%= form.submit "Check" %>
        </div>
    <% end %>
    <% if flash[:notice] %>
      <% if flash['notice']['successful'] %>
        <%= render_toast header: 'Success!', description: flash['notice']['message'], id: "default_toast", class: "hidden" %>
      <% else %>
        <%= render_toast header: 'Whoops!', description: flash['notice']['message'], variant: :destructive, id: "error_toast", class: "hidden" %>
      <% end %>
    <% end %>
  <% end %>
  <%= render_card(title: "Deals Right Now", subtitle: "", body: nil, footer: nil, class: "w-full my-4") do %>
    <%= render_table do %>
      <%= table_head do %>
        <%= table_header "" %>
        <%= table_header "Company" %>
        <%= table_header "Code" %>
        <%= table_header "More" %>
      <% end %>
      <%= table_body do %>
        <%= render partial: "promotions/promotion", collection: @promotions %>
      <% end %>
    <% end %>
  <% end %>
  <%= render partial: "shared/footer" %>
</div>
